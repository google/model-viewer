{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../src/docs-and-examples/utils.ts"],"names":[],"mappings":"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","sourcesContent":["/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {convertJSONToHTML, createExamplesHeader, createExamplesSidebar, starterSidebar} from './create-html';\nimport {getSidebarCategoryForNewPage, sidebarDocsObserver, sidebarExamplesObserver} from './sidebar';\n\n\n// TODO: Handle going from examples back to docs (old state), possibly\n// include a previous state to revert to in URI\nexport function switchPages(oldLocation: string, newLocation: string) {\n  if (oldLocation !== newLocation) {\n    let URI = '';\n    if (oldLocation === 'docs') {\n      const category = getSidebarCategoryForNewPage();\n      URI = '../examples/'.concat(category);\n    } else {\n      URI = newLocation;\n    }\n    const d = document.createElement('a');\n    d.setAttribute('href', URI);\n    window.location.href = d.href;\n  }\n}\n\nwindow.onscroll = function() {\n  stickyHeader()\n};\n\nfunction stickyHeader() {\n  const headers = document.getElementsByClassName('header');\n  for (let i = 0; i < headers.length; i++) {\n    const header = headers[i] as HTMLElement;\n    const sticky = header.offsetTop;\n    if (window.pageYOffset > sticky) {\n      header.classList.add('sticky');\n    } else {\n      header.classList.remove('sticky');\n    }\n  }\n}\n\ninterface JSONCallback {\n  (response: string): void\n}\n\nfunction loadJSON(filePath: string, callback: JSONCallback) {\n  const xobj = new XMLHttpRequest();\n  xobj.overrideMimeType('application/json');\n  xobj.open('GET', filePath, true);\n  xobj.onreadystatechange = function() {\n    if (xobj.readyState === 4 && xobj.status === 200) {\n      callback(xobj.responseText);\n    }\n  };\n  xobj.send(null);\n}\n\n/*\n * On a page load if # is given, jump to section\n */\nfunction jumpToSection() {\n  const windowHref = window.location.href;\n  const hashtagIndex = windowHref.indexOf('#');\n  if (hashtagIndex >= 0 && windowHref.length > hashtagIndex) {\n    const jumpToId = windowHref.slice(hashtagIndex + 1);\n    const element = document.getElementById(jumpToId);\n    if (element) {\n      const fakeA = document.createElement('a');\n      fakeA.href = '#'.concat(jumpToId);\n      fakeA.click();\n    }\n  }\n}\n\nexport function initFooterLinks() {\n  const footerLinks = document.getElementById('footer-links');\n  footerLinks!.innerHTML = `\n<div>\n  <a href=\"https://github.com/google/model-viewer\">Github</a> ∙ <a href=\"https://model-viewer.glitch.me/\">Glitch</a> ∙ <a href=\"https://github.com/google/model-viewer/issues\">Bug report</a> ∙ <a href=\"https://policies.google.com/privacy\">Privacy</a>\n</div>`;\n}\n\n/* Load the JSON asynchronously, then generate the sidebarObserver after all the\n * documentation in the window.\n * docsOrExample: 'docs' or 'examples-${category}'\n */\nexport function init(docsOrExample: string) {\n  const base = docsOrExample.split('-')[0];\n  const filePath =\n      (base === 'examples' ? '../' : '') + '../data/' + base + '.json';\n  loadJSON(filePath, function(response: string) {\n    const json = JSON.parse(response);\n    starterSidebar(docsOrExample);\n    if (base === 'examples') {\n      createExamplesSidebar(json);\n      createExamplesHeader();\n      sidebarExamplesObserver();\n    } else {\n      convertJSONToHTML(json);\n      sidebarDocsObserver();\n    }\n    jumpToSection();\n  });\n}\n\n// export function toggleSidebar() {\n//   document.getElementById('sidenav')?.classList.toggle('active');\n// }\n\n// (self as any).toggleSidebar = toggleSidebar;\n(self as any).switchPages = switchPages;\n(self as any).init = init;\n(self as any).initFooterLinks = initFooterLinks;\n\nfunction handleSideBarClickToggle(event: any) {\n  if (!(event.target.classList.contains('sidebar') || event.target.closest(\".sidebar\")) && !event.target.classList.contains(\"hamburgerInput\")) {\n    if (event.target.classList.contains('tab')) {\n      document.getElementById('sidenav')?.classList.toggle('active');\n    } else {\n      if (document.getElementById('sidenav')?.classList.contains('active')) {\n        document.getElementById('sidenav')?.classList.remove('active');\n      }\n    }\n  }\n}\n\ndocument.addEventListener('click', handleSideBarClickToggle);"]}